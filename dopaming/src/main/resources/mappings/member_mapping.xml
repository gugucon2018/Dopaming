<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- dumy_mapper.xml -->
<mapper namespace="MemberDAO">
 	
 	<!-- 로그인 -->
    <select id="login" resultType="member">
    	select * from members where member_id=#{member_id}
    </select>
    <!-- id 체크 -->
    <select id="valueCheckId" resultType="String">
     	select member_id from members where member_id = #{member_id}
    </select>
    <!-- 패스워드 체크 -->
    <select id="valueCheckPW" resultType="String">
     	select member_password from members where member_id = #{member_id}
    </select>
   <!-- 이메일 체크 -->
    <select id="valueCheckEmail" resultType="String">
    	select member_email from members where member_email = #{member_email}
    </select>
    
    <!-- 아이디 중복 검사 -->
    <select id = "check_id" parameterType="String" resultType="int">
    	select count(*) from members where member_id = #{member_id}
    </select>
    
    <!-- 이메일 중복 검사 -->
    <select id="check_email" parameterType="String" resultType="int">
    	select count(*) from members where member_email = #{member_email}
    </select>
    
    <!-- 회원가입 -->
    <insert id="register">
    	insert into members (
    		member_id
    		, member_password
    		, member_email
    		, approval_status
    		, approval_key
    	) values (
    		#{member_id}
    		, #{member_password}
    		, #{member_email}
    		, 'false'
    		, #{approval_key} 
    	)
    </insert>
    <!-- 이메일 인증 -->
    <update id="approval_memeber" parameterType="member">
    	update members set 
    	approval_status = 'true'
    	where member_email = #{member_email}
    	and approval_key = #{approval_key}  
    </update>
    <!-- 비밀번호 변경 -->
    <update id="changepass" parameterType="member">
    	update members set
    	member_password = #{member_password}
    	where member_id = #{member_id}
    </update>
</mapper>
